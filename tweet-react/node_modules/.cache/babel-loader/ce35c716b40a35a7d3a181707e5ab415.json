{"ast":null,"code":"var _jsxFileName = \"/var/www/html/tweet_academie/tweet-react/src/wall.jsx\";\nimport React from \"react\";\nexport class Wall extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cookie: localStorage.getItem(\"cookie\"),\n      isLoaded: false,\n      refresh: this.props.data,\n      isSearch: false\n    };\n\n    this.like = e => {\n      fetch(\"http://localhost:8080/like\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          cookie: this.state.cookie,\n          id: e.target.getAttribute(\"data\")\n        }),\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      }).then(resp => resp.json()).then(val => {\n        console.table(val);\n        this.componentDidMount();\n      });\n    };\n\n    this.delete = e => {\n      fetch(\"http://localhost:8080/deleteTweet\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          cookie: this.state.cookie,\n          id: e.target.getAttribute(\"data\")\n        }),\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      }).then(resp => resp.json()).then(val => {\n        console.table(val);\n        this.componentDidMount();\n      });\n    };\n\n    this.retweet = e => {\n      fetch(\"http://localhost:8080/retweet\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          cookie: this.state.cookie,\n          id: e.target.getAttribute(\"data\")\n        }),\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      }).then(resp => resp.json()).then(val => {\n        console.table(val);\n        this.componentDidMount();\n      });\n    };\n\n    this.setTweetFormat = tweet => {\n      let traitement = tweet + \" \";\n\n      if (traitement.charAt(0) === \"#\") {\n        return React.createElement(\"a\", {\n          className: \"text-twitter-5\",\n          data: tweet.substr(1, tweet.length - 1),\n          onClick: this.callback,\n          style: {\n            cursor: \"pointer\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \" \", traitement);\n      } else if (traitement.charAt(0) === \"@\") {\n        return React.createElement(\"a\", {\n          className: \"text-twitter-5 search\",\n          data: tweet.substr(1, tweet.length - 1),\n          onClick: this.callback,\n          style: {\n            cursor: \"pointer\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, traitement);\n      }\n\n      return traitement;\n    };\n\n    this.callback = e => {\n      if (e.target.innerText.charAt(0) === \"@\") {\n        this.setState({\n          refresh: false\n        });\n        this.props.callback(e.target.innerText);\n        fetch(\"http://localhost:8080/getWallTweet\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            cookie: this.state.cookie,\n            id: e.target.innerText.substr(1, e.target.innerText.length - 1)\n          }),\n          headers: {\n            \"content-type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(val => {\n          this.setState({\n            tweet: val\n          });\n          this.setState({\n            isLoaded: true\n          });\n          console.log(this.state);\n        });\n      } else {\n        this.setState({\n          refresh: false\n        });\n        fetch(\"http://localhost:8080/search\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            search: e.target.getAttribute(\"data\")\n          }),\n          headers: {\n            \"content-type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(val => {\n          this.setState({\n            tweet: val\n          });\n          this.setState({\n            isLoaded: true\n          });\n          console.log(this.state);\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:8080/getWallTweet\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        cookie: this.state.cookie\n      }),\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    }).then(resp => resp.json()).then(val => {\n      this.setState({\n        tweet: val\n      });\n      this.setState({\n        isLoaded: true\n      });\n      console.log(this.state);\n    });\n  }\n\n  componentWillReceiveProps(props) {\n    console.log(\"Wall \" + props);\n    console.log(\"here\" + this.props.isSearch);\n    if (this.state.refresh) this.componentDidMount();\n    if (props.searchBar) this.setState({\n      tweet: props.searchBar,\n      isSearch: true\n    });\n  }\n\n  render() {\n    if (!this.state.isLoaded) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Loading\\u2026\");\n    } else {\n      let content = this.state.tweet.map(x => x.content.split(\" \").map(y => this.setTweetFormat(y)));\n      let count = 0;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        id: \"showTweet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.state.tweet.map(x => React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header bg-twitter-6 text-white d-flex justify-content-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Tweet\", React.createElement(\"a\", {\n        data: x.id,\n        className: \"deleteTweet btn btn-sm btn-danger\",\n        onClick: this.delete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"X\")), React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: x.profil_img,\n        alt: \"Profile image\",\n        className: \"card-img-top col-md-3\",\n        style: {\n          borderRadius: \"999999px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-twitter-5\",\n        style: {\n          cursor: \"pointer\"\n        },\n        onClick: this.callback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"@\" + x.username)), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, Date(Date.parse(x.date)).substr(0, 15))), React.createElement(\"div\", {\n        className: \"col-md-12 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, content[count++]), React.createElement(\"img\", {\n        className: \"col-md-12\",\n        src: x.paths,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card-footer d-flex justify-content-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        data: x.id,\n        className: \"like btn btn-sm btn-twitter-2\",\n        onClick: this.like,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Like\"), React.createElement(\"article\", {\n        className: \"text-twitter-5\",\n        dangerouslySetInnerHTML: {\n          __html: x.likes + \"&hearts;\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(\"article\", {\n        className: \"text-twitter-5\",\n        dangerouslySetInnerHTML: {\n          __html: x.retweet + \"&#8362;\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        data: x.id,\n        className: \"like btn btn-sm btn-twitter-2\",\n        onClick: this.retweet,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Retweet\")))));\n    }\n  }\n\n}","map":{"version":3,"sources":["/var/www/html/tweet_academie/tweet-react/src/wall.jsx"],"names":["React","Wall","Component","constructor","props","state","cookie","localStorage","getItem","isLoaded","refresh","data","isSearch","like","e","fetch","method","body","JSON","stringify","id","target","getAttribute","headers","then","resp","json","val","console","table","componentDidMount","delete","retweet","setTweetFormat","tweet","traitement","charAt","substr","length","callback","cursor","innerText","setState","log","search","componentWillReceiveProps","searchBar","render","content","map","x","split","y","count","profil_img","borderRadius","username","Date","parse","date","paths","__html","likes"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nexport class Wall extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    state = {\n        cookie: localStorage.getItem(\"cookie\"),\n        isLoaded: false,\n        refresh: this.props.data,\n        isSearch: false\n    };\n\n    like = (e) => {\n        fetch(\"http://localhost:8080/like\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                cookie: this.state.cookie,\n                id: e.target.getAttribute(\"data\")\n            }),\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        }).then((resp) => resp.json())\n            .then(val => {\n                console.table(val);\n                this.componentDidMount();\n            });\n    };\n\n    delete = (e) => {\n        fetch(\"http://localhost:8080/deleteTweet\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                cookie: this.state.cookie,\n                id: e.target.getAttribute(\"data\")\n            }),\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        }).then((resp) => resp.json())\n            .then(val => {\n                console.table(val);\n                this.componentDidMount();\n            });\n    };\n\n    retweet = (e) => {\n        fetch(\"http://localhost:8080/retweet\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                cookie: this.state.cookie,\n                id: e.target.getAttribute(\"data\")\n            }),\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        }).then((resp) => resp.json())\n            .then(val => {\n                console.table(val);\n                this.componentDidMount();\n            });\n    };\n\n    setTweetFormat = (tweet) => {\n        let traitement = tweet+\" \";\n        if (traitement.charAt(0) === \"#\") {\n           return  (<a className=\"text-twitter-5\" data={ tweet.substr(1, tweet.length - 1)} onClick={this.callback} style={{cursor: \"pointer\"}}> { traitement }</a>);\n        } else if (traitement.charAt(0) === \"@\") {\n           return (<a className=\"text-twitter-5 search\" data={ tweet.substr(1, tweet.length - 1)} onClick={this.callback} style={{cursor: \"pointer\"}}>{ traitement }</a>);\n        }\n        return traitement;\n    };\n\n    callback = (e) => {\n        if(e.target.innerText.charAt(0) === \"@\") {\n            this.setState({ refresh: false });\n            this.props.callback(e.target.innerText);\n            fetch(\"http://localhost:8080/getWallTweet\", {\n                method: \"POST\",\n                body: JSON.stringify({cookie: this.state.cookie, id: e.target.innerText.substr(1, e.target.innerText.length - 1)}),\n                headers: {\n                    \"content-type\": \"application/json\"\n                }\n            }).then((resp) => resp.json())\n                .then(val => {\n                    this.setState({tweet: val});\n                    this.setState({isLoaded: true});\n                    console.log(this.state)\n                });\n        }\n        else {\n            this.setState({ refresh: false });\n            fetch(\"http://localhost:8080/search\", {\n                method: \"POST\",\n                body: JSON.stringify({ search: e.target.getAttribute(\"data\") }),\n                headers: {\n                    \"content-type\": \"application/json\"\n                }\n            }).then((resp) => resp.json())\n                .then(val => {\n\n                    this.setState({tweet: val});\n                    this.setState({isLoaded: true});\n                    console.log(this.state)\n                });\n        }\n    };\n\n    componentDidMount() {\n        fetch(\"http://localhost:8080/getWallTweet\", {\n            method: \"POST\",\n            body: JSON.stringify({cookie: this.state.cookie}),\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        }).then((resp) => resp.json())\n            .then(val => {\n                this.setState({tweet: val});\n                this.setState({isLoaded: true});\n                console.log(this.state)\n            });\n    }\n\n    componentWillReceiveProps(props) {\n        console.log(\"Wall \" + props);\n        console.log(\"here\" + this.props.isSearch);\n        if (this.state.refresh)\n            this.componentDidMount();\n        if(props.searchBar)\n            this.setState({ tweet: props.searchBar, isSearch: true})\n    }\n\n    render() {\n\n        if (!this.state.isLoaded) {\n            return <div>Loading…</div>;\n        } else {\n             let content = this.state.tweet.map(x => (x.content.split(\" \").map(y => (\n                this.setTweetFormat(y)\n            ))));\n\n            let count = 0;\n            return (\n                <div className=\"container\" id=\"showTweet\">\n                    {this.state.tweet.map(x => (\n                            <div className=\"card\">\n                                <div className=\"card-header bg-twitter-6 text-white d-flex justify-content-between\">\n                                    Tweet\n                                    <a data={x.id} className=\"deleteTweet btn btn-sm btn-danger\" onClick={this.delete}>X</a>\n                                </div>\n                                <div className=\"card-body\">\n                                    <div className=\"row\">\n                                        <img src={x.profil_img} alt=\"Profile image\" className=\"card-img-top col-md-3\"\n                                             style={{borderRadius: \"999999px\"}}/>\n                                        <div className=\"col-md-3\">\n                                            <p className=\"text-twitter-5\" style={{cursor: \"pointer\"}} onClick={this.callback}>{\"@\" + x.username}</p>\n                                        </div>\n                                        <div className=\"col-md-3\">\n                                            <p className=\"text-muted\">{Date(Date.parse(x.date)).substr(0, 15)}</p>\n                                        </div>\n                                        <div className=\"col-md-12 text-center\" >\n                                            { content[count++] }\n                                        </div>\n                                        <img className=\"col-md-12\" src={x.paths}/>\n                                    </div>\n                                </div>\n                                <div className=\"card-footer d-flex justify-content-between\">\n                                    <button data={x.id} className=\"like btn btn-sm btn-twitter-2\" onClick={this.like}>Like\n                                    </button>\n                                    <article className=\"text-twitter-5\"\n                                             dangerouslySetInnerHTML={{__html: x.likes + \"&hearts;\"}}/>\n                                    <article className=\"text-twitter-5\"\n                                             dangerouslySetInnerHTML={{__html: x.retweet + \"&#8362;\"}}/>\n                                    <button data={x.id} className=\"like btn btn-sm btn-twitter-2\"\n                                            onClick={this.retweet}>Retweet\n                                    </button>\n                                </div>\n                            </div>\n                        )\n                    )\n                    }\n                </div>\n            );\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}